<!-- TeachersCambodia AI Automation Platform - Enhanced Integration Code -->
<div id="teachers-cambodia-ai-widget" style="display: none;">
  <div class="ai-widget-container">
    <div class="ai-widget-header">
      <div class="ai-header-content">
        <div class="ai-logo">ü§ñ</div>
        <div class="ai-title">
          <h3>AI-Powered Job Matching</h3>
          <p>Find your perfect teaching position in Cambodia</p>
        </div>
      </div>
      <button class="ai-widget-close" onclick="toggleAIWidget()">√ó</button>
    </div>
    
    <div class="ai-widget-content">
      <div class="ai-form-grid">
        <div class="ai-form-section">
          <h4>üë§ Teacher Profile</h4>
          <div class="input-group">
            <label for="teacherName">Your Name</label>
            <input type="text" id="teacherName" placeholder="Enter your full name" class="ai-input">
          </div>
          <div class="input-group">
            <label for="teacherSubject">Teaching Subject</label>
            <select id="teacherSubject" class="ai-select">
              <option value="">Choose your subject</option>
              <option value="english">üá¨üáß English</option>
              <option value="math">üî¢ Mathematics</option>
              <option value="science">üî¨ Science</option>
              <option value="history">üìö History</option>
              <option value="art">üé® Art</option>
              <option value="music">üéµ Music</option>
              <option value="pe">‚öΩ Physical Education</option>
              <option value="esl">üåç ESL/TEFL</option>
            </select>
          </div>
          <div class="input-group">
            <label for="teacherExperience">Years of Experience</label>
            <select id="teacherExperience" class="ai-select">
              <option value="">Select experience level</option>
              <option value="0-1">üÜï 0-1 years (New Teacher)</option>
              <option value="2-5">‚≠ê 2-5 years (Experienced)</option>
              <option value="6-10">üåü 6-10 years (Senior)</option>
              <option value="10+">üèÜ 10+ years (Expert)</option>
            </select>
          </div>
          <div class="input-group">
            <label for="teacherLocation">Preferred Location</label>
            <input type="text" id="teacherLocation" placeholder="e.g., Phnom Penh, Siem Reap" class="ai-input">
          </div>
        </div>
        
        <div class="ai-form-section">
          <h4>üíº Job Preferences</h4>
          <div class="input-group">
            <label for="jobType">Job Type</label>
            <select id="jobType" class="ai-select">
              <option value="">Choose job type</option>
              <option value="full-time">‚è∞ Full Time</option>
              <option value="part-time">üïê Part Time</option>
              <option value="contract">üìã Contract</option>
              <option value="substitute">üîÑ Substitute</option>
            </select>
          </div>
          <div class="input-group">
            <label for="salaryRange">Salary Range</label>
            <select id="salaryRange" class="ai-select">
              <option value="">Select salary range</option>
              <option value="500-1000">üí∞ $500 - $1,000</option>
              <option value="1000-2000">üíµ $1,000 - $2,000</option>
              <option value="2000-3000">üíé $2,000 - $3,000</option>
              <option value="3000+">üèÜ $3,000+</option>
            </select>
          </div>
          
          <div class="ai-features">
            <h5>‚ú® AI Features</h5>
            <div class="feature-list">
              <div class="feature-item">üéØ Smart Matching</div>
              <div class="feature-item">üìä Match Scores</div>
              <div class="feature-item">üí° Personalized Insights</div>
              <div class="feature-item">üåè Cultural Fit Analysis</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="ai-action-section">
        <button onclick="findMatchingJobs()" class="ai-button">
          <span class="button-icon">üîç</span>
          <span class="button-text">Find Matching Jobs</span>
        </button>
        <p class="ai-note">AI will analyze your profile and find the best opportunities</p>
      </div>
      
      <div id="aiResults" class="ai-results" style="display: none;">
        <div class="results-header">
          <h4>üéØ AI Match Results</h4>
          <div class="results-count" id="resultsCount"></div>
        </div>
        <div id="matchResults"></div>
      </div>
    </div>
  </div>
</div>

<!-- Floating AI Chatbot Icon -->
<div id="ai-chatbot-icon" onclick="toggleAIWidget()" class="ai-chatbot-icon">
  <div class="chatbot-emoji">ü§ñ</div>
  <div class="chatbot-tooltip">AI Job Matching</div>
</div>

<style>
/* Enhanced TeachersCambodia AI Widget Styles */
#teachers-cambodia-ai-widget {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(5px);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
}

.ai-widget-container {
  background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
  border-radius: 20px;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
  width: 100%;
  max-width: 900px;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-30px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.ai-widget-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 25px 30px;
  border-radius: 20px 20px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  overflow: hidden;
}

.ai-widget-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
  pointer-events: none;
}

.ai-header-content {
  display: flex;
  align-items: center;
  gap: 15px;
}

.ai-logo {
  font-size: 32px;
  animation: pulse 2s infinite;
}

.ai-title h3 {
  margin: 0 0 5px 0;
  font-size: 24px;
  font-weight: 700;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.ai-title p {
  margin: 0;
  font-size: 14px;
  opacity: 0.9;
  font-weight: 400;
}

.ai-widget-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  font-size: 28px;
  cursor: pointer;
  padding: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.ai-widget-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.ai-widget-content {
  padding: 30px;
}

.ai-form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-bottom: 30px;
}

.ai-form-section {
  background: white;
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
  border: 1px solid #e9ecef;
}

.ai-form-section h4 {
  margin: 0 0 20px 0;
  color: #2c3e50;
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.input-group {
  margin-bottom: 20px;
}

.input-group label {
  display: block;
  margin-bottom: 8px;
  color: #495057;
  font-weight: 500;
  font-size: 14px;
}

.ai-input, .ai-select {
  width: 100%;
  padding: 15px;
  border: 2px solid #e9ecef;
  border-radius: 10px;
  font-size: 15px;
  transition: all 0.3s ease;
  box-sizing: border-box;
  background: #f8f9fa;
}

.ai-input:focus, .ai-select:focus {
  outline: none;
  border-color: #667eea;
  background: white;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.ai-features {
  margin-top: 25px;
  padding-top: 20px;
  border-top: 1px solid #e9ecef;
}

.ai-features h5 {
  margin: 0 0 15px 0;
  color: #2c3e50;
  font-size: 16px;
  font-weight: 600;
}

.feature-list {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}

.feature-item {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 500;
  text-align: center;
}

.ai-action-section {
  text-align: center;
  margin-bottom: 30px;
}

.ai-button {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 18px 40px;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-flex;
  align-items: center;
  gap: 12px;
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
  position: relative;
  overflow: hidden;
}

.ai-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.ai-button:hover::before {
  left: 100%;
}

.ai-button:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
}

.ai-button:active {
  transform: translateY(-1px);
}

.button-icon {
  font-size: 20px;
}

.ai-note {
  margin: 15px 0 0 0;
  color: #6c757d;
  font-size: 14px;
  font-style: italic;
}

.ai-results {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  padding: 25px;
  border-radius: 15px;
  border-left: 5px solid #667eea;
}

.results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.results-header h4 {
  margin: 0;
  color: #2c3e50;
  font-size: 20px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.results-count {
  background: #667eea;
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
}

.match-item {
  background: white;
  padding: 20px;
  margin: 15px 0;
  border-radius: 12px;
  border: 1px solid #e9ecef;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
  transition: transform 0.3s ease;
}

.match-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

.match-score {
  display: inline-block;
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
  margin-bottom: 12px;
}

.match-title {
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 8px;
  font-size: 18px;
}

.match-details {
  color: #6c757d;
  font-size: 14px;
  margin-bottom: 12px;
  line-height: 1.5;
}

.match-strengths {
  background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
  padding: 12px;
  border-radius: 8px;
  font-size: 13px;
  color: #155724;
  border-left: 4px solid #28a745;
}

/* Enhanced Floating Chatbot Icon */
.ai-chatbot-icon {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
  z-index: 9999;
  transition: all 0.3s ease;
  animation: float 3s ease-in-out infinite;
  position: relative;
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes pulse {
  0% {
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
  }
  50% {
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
  }
  100% {
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
  }
}

.ai-chatbot-icon:hover {
  transform: scale(1.1) translateY(-5px);
  box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
}

.chatbot-emoji {
  font-size: 28px;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-5px);
  }
  60% {
    transform: translateY(-3px);
  }
}

.chatbot-tooltip {
  position: absolute;
  right: 80px;
  background: #2c3e50;
  color: white;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  opacity: 0;
  transform: translateX(10px);
  transition: all 0.3s ease;
  pointer-events: none;
}

.chatbot-tooltip::after {
  content: '';
  position: absolute;
  right: -5px;
  top: 50%;
  transform: translateY(-50%);
  border-left: 5px solid #2c3e50;
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
}

.ai-chatbot-icon:hover .chatbot-tooltip {
  opacity: 1;
  transform: translateX(0);
}

/* Loading Animation */
.ai-loading {
  text-align: center;
  padding: 40px 20px;
  color: #6c757d;
  font-size: 16px;
}

.ai-loading::after {
  content: '';
  display: inline-block;
  width: 24px;
  height: 24px;
  border: 3px solid #e9ecef;
  border-top: 3px solid #667eea;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-left: 15px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
  .ai-widget-container {
    width: 95%;
    margin: 10px;
    max-height: 95vh;
  }
  
  .ai-form-grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .ai-widget-content {
    padding: 20px;
  }
  
  .ai-widget-header {
    padding: 20px;
  }
  
  .ai-header-content {
    flex-direction: column;
    text-align: center;
    gap: 10px;
  }
  
  .ai-title h3 {
    font-size: 20px;
  }
  
  .ai-chatbot-icon {
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
  }
  
  .chatbot-emoji {
    font-size: 24px;
  }
  
  .feature-list {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .ai-widget-container {
    width: 98%;
    margin: 5px;
  }
  
  .ai-widget-content {
    padding: 15px;
  }
  
  .ai-form-section {
    padding: 20px;
  }
}
</style>

<script>
// Enhanced TeachersCambodia AI Automation - JavaScript Functions

// Configuration
const AI_CONFIG = {
  apiUrl: 'https://your-ai-backend-url.com/api', // Replace with your actual backend URL
  apiKey: 'your-api-key-here', // Replace with your actual API key
  maxResults: 5,
  matchThreshold: 0.6
};

// Enhanced sample job data
const SAMPLE_JOBS = [
  {
    id: 1,
    title: "English Teacher - International School",
    school: "Phnom Penh International Academy",
    location: "Phnom Penh",
    salary: "$1,500 - $2,500",
    type: "Full Time",
    requirements: "TEFL certified, 2+ years experience",
    matchScore: 0.92,
    strengths: ["Perfect subject match", "Experience level ideal", "Location preference met"],
    benefits: ["Health insurance", "Housing allowance", "Professional development"]
  },
  {
    id: 2,
    title: "ESL Teacher - Language Center",
    school: "Cambodia English Center",
    location: "Siem Reap",
    salary: "$800 - $1,200",
    type: "Part Time",
    requirements: "Native English speaker, TEFL preferred",
    matchScore: 0.78,
    strengths: ["Subject expertise", "Flexible schedule", "Cultural experience"],
    benefits: ["Flexible hours", "Cultural immersion", "Travel opportunities"]
  },
  {
    id: 3,
    title: "Mathematics Teacher - Private School",
    school: "Royal Cambodian School",
    location: "Battambang",
    salary: "$1,200 - $1,800",
    type: "Full Time",
    requirements: "Bachelor's degree, teaching experience",
    matchScore: 0.65,
    strengths: ["Good salary range", "Stable position", "Professional development"],
    benefits: ["Competitive salary", "Stable contract", "Career growth"]
  },
  {
    id: 4,
    title: "Science Teacher - International School",
    school: "Angkor International School",
    location: "Phnom Penh",
    salary: "$1,800 - $2,800",
    type: "Full Time",
    requirements: "Science degree, 3+ years experience",
    matchScore: 0.85,
    strengths: ["High salary range", "International environment", "Modern facilities"],
    benefits: ["International curriculum", "Modern labs", "Expat community"]
  },
  {
    id: 5,
    title: "Art Teacher - Creative Academy",
    school: "Cambodia Creative Academy",
    location: "Phnom Penh",
    salary: "$1,000 - $1,500",
    type: "Part Time",
    requirements: "Art degree, creative portfolio",
    matchScore: 0.72,
    strengths: ["Creative environment", "Flexible schedule", "Cultural expression"],
    benefits: ["Creative freedom", "Gallery exhibitions", "Cultural projects"]
  }
];

// Toggle AI Widget
function toggleAIWidget() {
  const widget = document.getElementById('teachers-cambodia-ai-widget');
  const icon = document.getElementById('ai-chatbot-icon');
  
  if (widget.style.display === 'none' || widget.style.display === '') {
    widget.style.display = 'flex';
    icon.style.display = 'none';
    // Track event
    trackAIEvent('widget_opened');
  } else {
    widget.style.display = 'none';
    icon.style.display = 'flex';
    // Track event
    trackAIEvent('widget_closed');
  }
}

// Enhanced Find Matching Jobs
async function findMatchingJobs() {
  const resultsDiv = document.getElementById('aiResults');
  const matchResultsDiv = document.getElementById('matchResults');
  const resultsCountDiv = document.getElementById('resultsCount');
  
  // Show loading
  resultsDiv.style.display = 'block';
  matchResultsDiv.innerHTML = '<div class="ai-loading">ü§ñ AI is analyzing your profile and finding the best matches...</div>';
  
  // Get form data
  const teacherData = {
    name: document.getElementById('teacherName').value,
    subject: document.getElementById('teacherSubject').value,
    experience: document.getElementById('teacherExperience').value,
    location: document.getElementById('teacherLocation').value,
    jobType: document.getElementById('jobType').value,
    salaryRange: document.getElementById('salaryRange').value
  };
  
  // Validate input
  if (!teacherData.subject || !teacherData.experience) {
    matchResultsDiv.innerHTML = `
      <div style="text-align: center; padding: 30px; color: #dc3545;">
        <div style="font-size: 48px; margin-bottom: 15px;">‚ö†Ô∏è</div>
        <h4 style="margin: 0 0 10px 0;">Please complete your profile</h4>
        <p style="margin: 0; font-size: 14px;">Fill in at least your subject and experience level to get accurate matches.</p>
      </div>
    `;
    return;
  }
  
  try {
    // Simulate API call delay with progress
    await simulateAIAnalysis();
    
    // Process matches
    const matches = processJobMatches(teacherData);
    
    // Display results
    displayMatchResults(matches);
    
    // Track event
    trackAIEvent('jobs_found', { count: matches.length, subject: teacherData.subject });
    
  } catch (error) {
    console.error('Error finding matches:', error);
    matchResultsDiv.innerHTML = `
      <div style="text-align: center; padding: 30px; color: #dc3545;">
        <div style="font-size: 48px; margin-bottom: 15px;">üòî</div>
        <h4 style="margin: 0 0 10px 0;">Oops! Something went wrong</h4>
        <p style="margin: 0; font-size: 14px;">Please try again in a moment.</p>
      </div>
    `;
  }
}

// Simulate AI Analysis with progress
async function simulateAIAnalysis() {
  const steps = [
    'Analyzing your teaching profile...',
    'Matching with job requirements...',
    'Calculating compatibility scores...',
    'Finding cultural fit...',
    'Generating personalized recommendations...'
  ];
  
  for (let i = 0; i < steps.length; i++) {
    await new Promise(resolve => setTimeout(resolve, 800));
  }
}

// Enhanced Process Job Matches
function processJobMatches(teacherData) {
  let matches = [...SAMPLE_JOBS];
  
  // Apply enhanced AI matching logic
  matches = matches.map(job => {
    let score = 0;
    let strengths = [];
    
    // Subject matching (30% weight)
    if (job.title.toLowerCase().includes(teacherData.subject.toLowerCase()) || 
        teacherData.subject === 'esl' && job.title.toLowerCase().includes('esl')) {
      score += 0.3;
      strengths.push('Perfect subject match');
    }
    
    // Experience matching (25% weight)
    if (teacherData.experience === '2-5' && job.requirements.includes('2+')) {
      score += 0.25;
      strengths.push('Experience level ideal');
    } else if (teacherData.experience === '6-10' && job.requirements.includes('experience')) {
      score += 0.25;
      strengths.push('Experience level ideal');
    } else if (teacherData.experience === '0-1' && !job.requirements.includes('experience')) {
      score += 0.2;
      strengths.push('Entry-level friendly');
    }
    
    // Location matching (20% weight)
    if (teacherData.location && job.location.toLowerCase().includes(teacherData.location.toLowerCase())) {
      score += 0.2;
      strengths.push('Location preference met');
    }
    
    // Job type matching (15% weight)
    if (teacherData.jobType && job.type.toLowerCase().includes(teacherData.jobType.toLowerCase())) {
      score += 0.15;
      strengths.push('Job type preference met');
    }
    
    // Salary matching (10% weight)
    if (teacherData.salaryRange && job.salary.includes(teacherData.salaryRange.split('-')[0].trim())) {
      score += 0.1;
      strengths.push('Salary expectations met');
    }
    
    return {
      ...job,
      matchScore: Math.min(score, 1),
      strengths: strengths.length > 0 ? strengths : ['Good overall match']
    };
  });
  
  // Filter and sort by match score
  matches = matches
    .filter(job => job.matchScore >= AI_CONFIG.matchThreshold)
    .sort((a, b) => b.matchScore - a.matchScore)
    .slice(0, AI_CONFIG.maxResults);
  
  return matches;
}

// Enhanced Display Match Results
function displayMatchResults(matches) {
  const matchResultsDiv = document.getElementById('matchResults');
  const resultsCountDiv = document.getElementById('resultsCount');
  
  if (matches.length === 0) {
    matchResultsDiv.innerHTML = `
      <div style="text-align: center; padding: 40px 20px; color: #6c757d;">
        <div style="font-size: 64px; margin-bottom: 20px;">üîç</div>
        <h4 style="margin: 0 0 15px 0; color: #2c3e50;">No matches found</h4>
        <p style="margin: 0 0 20px 0; font-size: 16px;">Try adjusting your preferences or check back later for new opportunities.</p>
        <button onclick="toggleAIWidget()" style="background: #667eea; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer;">
          Try Different Criteria
        </button>
      </div>
    `;
    resultsCountDiv.textContent = '0 matches';
    return;
  }
  
  resultsCountDiv.textContent = `${matches.length} matches found`;
  
  const resultsHTML = matches.map((job, index) => `
    <div class="match-item" style="animation: slideInUp 0.5s ease ${index * 0.1}s both;">
      <div class="match-score">${Math.round(job.matchScore * 100)}% Match</div>
      <div class="match-title">${job.title}</div>
      <div class="match-details">
        <strong>üè´ ${job.school}</strong><br>
        üìç ${job.location} | üí∞ ${job.salary} | ‚è∞ ${job.type}<br>
        üìã ${job.requirements}
      </div>
      <div class="match-strengths">
        <strong>‚ú® Why this matches:</strong> ${job.strengths.join(', ')}
      </div>
      ${job.benefits ? `
        <div style="margin-top: 12px; padding: 8px; background: #f8f9fa; border-radius: 6px; font-size: 12px; color: #495057;">
          <strong>üéÅ Benefits:</strong> ${job.benefits.join(', ')}
        </div>
      ` : ''}
    </div>
  `).join('');
  
  matchResultsDiv.innerHTML = resultsHTML;
}

// Initialize Enhanced AI Widget
document.addEventListener('DOMContentLoaded', function() {
  console.log('ü§ñ TeachersCambodia AI Automation Platform loaded successfully!');
  
  // Add enhanced event listeners
  const inputs = document.querySelectorAll('.ai-input, .ai-select');
  inputs.forEach(input => {
    input.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        findMatchingJobs();
      }
    });
    
    // Add focus effects
    input.addEventListener('focus', function() {
      this.parentElement.style.transform = 'scale(1.02)';
    });
    
    input.addEventListener('blur', function() {
      this.parentElement.style.transform = 'scale(1)';
    });
  });
  
  // Add keyboard shortcuts
  document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'A') {
      e.preventDefault();
      toggleAIWidget();
    }
    
    // ESC key to close widget
    if (e.key === 'Escape') {
      const widget = document.getElementById('teachers-cambodia-ai-widget');
      if (widget.style.display === 'flex') {
        toggleAIWidget();
      }
    }
  });
  
  // Add click outside to close
  document.addEventListener('click', function(e) {
    const widget = document.getElementById('teachers-cambodia-ai-widget');
    const icon = document.getElementById('ai-chatbot-icon');
    
    if (e.target === widget) {
      toggleAIWidget();
    }
  });
  
  // Track page load
  trackAIEvent('widget_loaded');
});

// Enhanced Analytics tracking
function trackAIEvent(eventName, data = {}) {
  // Replace with your actual analytics tracking
  console.log('AI Event:', eventName, data);
  
  // Example: Google Analytics
  if (typeof gtag !== 'undefined') {
    gtag('event', eventName, {
      event_category: 'AI_Automation',
      event_label: 'TeachersCambodia',
      ...data
    });
  }
}

// Export functions for external use
window.TeachersCambodiaAI = {
  toggleWidget: toggleAIWidget,
  findJobs: findMatchingJobs,
  trackEvent: trackAIEvent
};

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
`;
document.head.appendChild(style);
</script>





